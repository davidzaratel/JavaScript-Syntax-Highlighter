<!DOCTYPE html>
    <html>
    <head>
      <title> Javascript Script Highlighter</title>
      <link rel='stylesheet' href='../css/styles.css'>
    </head>
    <body>
    <h1>Javascript script highlighter</h1>
    <h3> By: David Zarate Lopez A01329795</h3>
    <br>
    <pre><code><span class="reserved">var</span><span> </span><span class="identifier">wpNavMenu</span><span class="signs">;</span><br><br><span class="signs">(</span><span class="reserved">function</span><span class="signs">(</span><span class="identifier">$</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><br><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">api</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">wpNavMenu</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><br><br><span>	</span><span>	</span><span class="identifier">options</span><span> </span><span class="signs">:</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span class="identifier">menuItemDepthPerLevel</span><span> </span><span class="signs">:</span><span> </span><span class="num">30</span><span class="signs">,</span><span> </span><span class="comment">// Do not use directly. Use depthToPx and pxToDepth instead.
</span><span>	</span><span>	</span><span>	</span><span class="identifier">globalMaxDepth</span><span> </span><span class="signs">:</span><span> </span><span class="num">11</span><br><span>	</span><span>	</span><span class="signs">}</span><span class="signs">,</span><br><br><span>	</span><span>	</span><span class="identifier">menuList</span><span> </span><span class="signs">:</span><span> </span><span class="identifier">undefined</span><span class="signs">,</span><span>	</span><span class="comment">// Set in init.
</span><span>	</span><span>	</span><span class="identifier">targetList</span><span> </span><span class="signs">:</span><span> </span><span class="identifier">undefined</span><span class="signs">,</span><span> </span><span class="comment">// Set in init.
</span><span>	</span><span>	</span><span class="identifier">menusChanged</span><span> </span><span class="signs">:</span><span> </span><span class="bool">false</span><span class="signs">,</span><br><span>	</span><span>	</span><span class="identifier">isRTL</span><span class="signs">:</span><span> </span><span class="signs">!</span><span class="signs">!</span><span> </span><span class="signs">(</span><span> </span><span class="string">'undefined'</span><span> </span><span class="signs">!</span><span class="signs">=</span><span> </span><span class="reserved">typeof</span><span> </span><span class="identifier">isRtl</span><span> </span><span class="signs">&</span><span class="signs">&</span><span> </span><span class="identifier">isRtl</span><span> </span><span class="signs">)</span><span class="signs">,</span><br><span>	</span><span>	</span><span class="identifier">negateIfRTL</span><span class="signs">:</span><span> </span><span class="signs">(</span><span> </span><span class="string">'undefined'</span><span> </span><span class="signs">!</span><span class="signs">=</span><span> </span><span class="reserved">typeof</span><span> </span><span class="identifier">isRtl</span><span> </span><span class="signs">&</span><span class="signs">&</span><span> </span><span class="identifier">isRtl</span><span> </span><span class="signs">)</span><span> </span><span class="signs">?</span><span> </span><span class="signs">-</span><span class="num">1</span><span> </span><span class="signs">:</span><span> </span><span class="num">1</span><span class="signs">,</span><br><br><span>	</span><span>	</span><span class="comment">// Functions that run on init.
</span><span>	</span><span>	</span><span class="identifier">init</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">menuList</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="string">'#menu-to-edit'</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">targetList</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">menuList</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">jQueryExtensions</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">attachMenuEditListeners</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">setupInputWithDefaultTitle</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">attachQuickSearchListeners</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">attachThemeLocationsListeners</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">attachTabsPanelListeners</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">attachUnsavedChangesListener</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">menuList</span><span class="signs">.</span><span class="identifier">length</span><span> </span><span class="signs">)</span><span> </span><span class="comment">// If no menu, we're in the + tab.
</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">initSortables</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">initToggles</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">initTabManager</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span class="signs">}</span><span class="signs">,</span><br><br><span>	</span><span>	</span><span class="identifier">jQueryExtensions</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span class="comment">// jQuery extensions
</span><span>	</span><span>	</span><span>	</span><span class="identifier">$</span><span class="signs">.</span><span class="identifier">fn</span><span class="signs">.</span><span class="identifier">extend</span><span class="signs">(</span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">menuItemDepth</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">margin</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">isRTL</span><span> </span><span class="signs">?</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">eq</span><span class="signs">(</span><span class="num">0</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">css</span><span class="signs">(</span><span class="string">'margin-right'</span><span class="signs">)</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">eq</span><span class="signs">(</span><span class="num">0</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">css</span><span class="signs">(</span><span class="string">'margin-left'</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">return</span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">pxToDepth</span><span class="signs">(</span><span> </span><span class="identifier">margin</span><span> </span><span class="signs">&</span><span class="signs">&</span><span> </span><span class="signs">-</span><span class="num">1</span><span> </span><span class="signs">!</span><span class="signs">=</span><span> </span><span class="identifier">margin</span><span class="signs">.</span><span class="identifier">indexOf</span><span class="signs">(</span><span class="string">'px'</span><span class="signs">)</span><span> </span><span class="signs">?</span><span> </span><span class="identifier">margin</span><span class="signs">.</span><span class="identifier">slice</span><span class="signs">(</span><span class="num">0</span><span class="signs">,</span><span> </span><span class="signs">-</span><span class="num">2</span><span class="signs">)</span><span> </span><span class="signs">:</span><span> </span><span class="num">0</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">updateDepthClass</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="identifier">current</span><span class="signs">,</span><span> </span><span class="identifier">prev</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">return</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">each</span><span class="signs">(</span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">t</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">prev</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">prev</span><span> </span><span class="signs">|</span><span class="signs">|</span><span> </span><span class="identifier">t</span><span class="signs">.</span><span class="identifier">menuItemDepth</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">removeClass</span><span class="signs">(</span><span class="string">'menu-item-depth-'</span><span class="signs">+</span><span> </span><span class="identifier">prev</span><span> </span><span class="signs">)</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">.</span><span class="identifier">addClass</span><span class="signs">(</span><span class="string">'menu-item-depth-'</span><span class="signs">+</span><span> </span><span class="identifier">current</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">shiftDepthClass</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="identifier">change</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">return</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">each</span><span class="signs">(</span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">t</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">depth</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">t</span><span class="signs">.</span><span class="identifier">menuItemDepth</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">removeClass</span><span class="signs">(</span><span class="string">'menu-item-depth-'</span><span class="signs">+</span><span> </span><span class="identifier">depth</span><span> </span><span class="signs">)</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">.</span><span class="identifier">addClass</span><span class="signs">(</span><span class="string">'menu-item-depth-'</span><span class="signs">+</span><span> </span><span class="signs">(</span><span class="identifier">depth</span><span> </span><span class="signs">+</span><span> </span><span class="identifier">change</span><span class="signs">)</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">childMenuItems</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">result</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">each</span><span class="signs">(</span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">t</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">,</span><span> </span><span class="identifier">depth</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">t</span><span class="signs">.</span><span class="identifier">menuItemDepth</span><span class="signs">(</span><span class="signs">)</span><span class="signs">,</span><span> </span><span class="identifier">next</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">t</span><span class="signs">.</span><span class="identifier">next</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">while</span><span class="signs">(</span><span> </span><span class="identifier">next</span><span class="signs">.</span><span class="identifier">length</span><span> </span><span class="signs">&</span><span class="signs">&</span><span> </span><span class="identifier">next</span><span class="signs">.</span><span class="identifier">menuItemDepth</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">></span><span> </span><span class="identifier">depth</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">result</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">result</span><span class="signs">.</span><span class="identifier">add</span><span class="signs">(</span><span> </span><span class="identifier">next</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">next</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">next</span><span class="signs">.</span><span class="identifier">next</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">return</span><span> </span><span class="identifier">result</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">updateParentMenuItemDBId</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">return</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">each</span><span class="signs">(</span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">item</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">input</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">item</span><span class="signs">.</span><span class="identifier">find</span><span class="signs">(</span><span class="string">'.menu-item-data-parent-id'</span><span class="signs">)</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">depth</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">item</span><span class="signs">.</span><span class="identifier">menuItemDepth</span><span class="signs">(</span><span class="signs">)</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">parent</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">item</span><span class="signs">.</span><span class="identifier">prev</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="identifier">depth</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="num">0</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><span> </span><span class="comment">// Item is on the top level, has no parent
</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">input</span><span class="signs">.</span><span class="identifier">val</span><span class="signs">(</span><span class="num">0</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span> </span><span class="reserved">else</span><span> </span><span class="signs">{</span><span> </span><span class="comment">// Find the parent item, and retrieve its object id.
</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">while</span><span class="signs">(</span><span> </span><span class="signs">!</span><span> </span><span class="identifier">parent</span><span class="signs">[</span><span class="num">0</span><span class="signs">]</span><span> </span><span class="signs">|</span><span class="signs">|</span><span> </span><span class="signs">!</span><span> </span><span class="identifier">parent</span><span class="signs">[</span><span class="num">0</span><span class="signs">]</span><span class="signs">.</span><span class="identifier">className</span><span> </span><span class="signs">|</span><span class="signs">|</span><span> </span><span class="signs">-</span><span class="num">1</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="identifier">parent</span><span class="signs">[</span><span class="num">0</span><span class="signs">]</span><span class="signs">.</span><span class="identifier">className</span><span class="signs">.</span><span class="identifier">indexOf</span><span class="signs">(</span><span class="string">'menu-item'</span><span class="signs">)</span><span> </span><span class="signs">|</span><span class="signs">|</span><span> </span><span class="signs">(</span><span> </span><span class="identifier">parent</span><span class="signs">.</span><span class="identifier">menuItemDepth</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">!</span><span class="signs">=</span><span> </span><span class="identifier">depth</span><span> </span><span class="signs">-</span><span> </span><span class="num">1</span><span> </span><span class="signs">)</span><span> </span><span class="signs">)</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">parent</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">parent</span><span class="signs">.</span><span class="identifier">prev</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">input</span><span class="signs">.</span><span class="identifier">val</span><span class="signs">(</span><span> </span><span class="identifier">parent</span><span class="signs">.</span><span class="identifier">find</span><span class="signs">(</span><span class="string">'.menu-item-data-db-id'</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">val</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">hideAdvancedMenuItemFields</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">return</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">each</span><span class="signs">(</span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">that</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">$</span><span class="signs">(</span><span class="string">'.hide-column-tog'</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">not</span><span class="signs">(</span><span class="string">':checked'</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">each</span><span class="signs">(</span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">that</span><span class="signs">.</span><span class="identifier">find</span><span class="signs">(</span><span class="string">'.field-'</span><span> </span><span class="signs">+</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">val</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">)</span><span class="signs">.</span><span class="identifier">addClass</span><span class="signs">(</span><span class="string">'hidden-field'</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="comment">/**
				 * Adds selected menu items to the menu.
				 *
				 * @param jQuery metabox The metabox jQuery object.
				 */</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">addSelectedToMenu</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="identifier">processMethod</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span> </span><span class="signs">(</span><span> </span><span class="num">0</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="string">'#menu-to-edit'</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">length</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">return</span><span> </span><span class="bool">false</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">return</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">each</span><span class="signs">(</span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">t</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">,</span><span> </span><span class="identifier">menuItems</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><span class="signs">}</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">checkboxes</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">t</span><span class="signs">.</span><span class="identifier">find</span><span class="signs">(</span><span class="string">'.tabs-panel-active .categorychecklist li input:checked'</span><span class="signs">)</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">re</span><span> </span><span class="signs">=</span><span> </span><span class="reserved">new</span><span> </span><span class="identifier">RegExp</span><span class="signs">(</span><span class="string">'menu-item\\[(\[^\\]\]*)'</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">processMethod</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">processMethod</span><span> </span><span class="signs">|</span><span class="signs">|</span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">addMenuItemToBottom</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="comment">// If no items are checked, bail.
</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span> </span><span class="signs">(</span><span> </span><span class="signs">!</span><span class="identifier">checkboxes</span><span class="signs">.</span><span class="identifier">length</span><span> </span><span class="signs">)</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">return</span><span> </span><span class="bool">false</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="comment">// Show the ajax spinner
</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">t</span><span class="signs">.</span><span class="identifier">find</span><span class="signs">(</span><span class="string">'img.waiting'</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">show</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="comment">// Retrieve menu item data
</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">$</span><span class="signs">(</span><span class="identifier">checkboxes</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">each</span><span class="signs">(</span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">t</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">listItemDBIDMatch</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">re</span><span class="signs">.</span><span class="identifier">exec</span><span class="signs">(</span><span> </span><span class="identifier">t</span><span class="signs">.</span><span class="identifier">attr</span><span class="signs">(</span><span class="string">'name'</span><span class="signs">)</span><span> </span><span class="signs">)</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">listItemDBID</span><span> </span><span class="signs">=</span><span> </span><span class="string">'undefined'</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="reserved">typeof</span><span> </span><span class="identifier">listItemDBIDMatch</span><span class="signs">[</span><span class="num">1</span><span class="signs">]</span><span> </span><span class="signs">?</span><span> </span><span class="num">0</span><span> </span><span class="signs">:</span><span> </span><span class="identifier">parseInt</span><span class="signs">(</span><span class="identifier">listItemDBIDMatch</span><span class="signs">[</span><span class="num">1</span><span class="signs">]</span><span class="signs">,</span><span> </span><span class="num">10</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span> </span><span class="signs">(</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">className</span><span> </span><span class="signs">&</span><span class="signs">&</span><span> </span><span class="signs">-</span><span class="num">1</span><span> </span><span class="signs">!</span><span class="signs">=</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">className</span><span class="signs">.</span><span class="identifier">indexOf</span><span class="signs">(</span><span class="string">'add-to-top'</span><span class="signs">)</span><span> </span><span class="signs">)</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">processMethod</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">addMenuItemToTop</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">menuItems</span><span class="signs">[</span><span class="identifier">listItemDBID</span><span class="signs">]</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">t</span><span class="signs">.</span><span class="identifier">closest</span><span class="signs">(</span><span class="string">'li'</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">getItemData</span><span class="signs">(</span><span> </span><span class="string">'add-menu-item'</span><span class="signs">,</span><span> </span><span class="identifier">listItemDBID</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="comment">// Add the items
</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">addItemToMenu</span><span class="signs">(</span><span class="identifier">menuItems</span><span class="signs">,</span><span> </span><span class="identifier">processMethod</span><span class="signs">,</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="comment">// Deselect the items and hide the ajax spinner
</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">checkboxes</span><span class="signs">.</span><span class="identifier">removeAttr</span><span class="signs">(</span><span class="string">'checked'</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">t</span><span class="signs">.</span><span class="identifier">find</span><span class="signs">(</span><span class="string">'img.waiting'</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">hide</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">getItemData</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span> </span><span class="identifier">itemType</span><span class="signs">,</span><span> </span><span class="identifier">id</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">itemType</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">itemType</span><span> </span><span class="signs">|</span><span class="signs">|</span><span> </span><span class="string">'menu-item'</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">itemData</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><span class="signs">}</span><span class="signs">,</span><span> </span><span class="identifier">i</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">fields</span><span> </span><span class="signs">=</span><span> </span><span class="signs">[</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-db-id'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-object-id'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-object'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-parent-id'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-position'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-type'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-title'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-url'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-description'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-attr-title'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-target'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-classes'</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="string">'menu-item-xfn'</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">]</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="signs">!</span><span class="identifier">id</span><span> </span><span class="signs">&</span><span class="signs">&</span><span> </span><span class="identifier">itemType</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="string">'menu-item'</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">id</span><span> </span><span class="signs">=</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">find</span><span class="signs">(</span><span class="string">'.menu-item-data-db-id'</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">val</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="signs">!</span><span class="identifier">id</span><span> </span><span class="signs">)</span><span> </span><span class="reserved">return</span><span> </span><span class="identifier">itemData</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">find</span><span class="signs">(</span><span class="string">'input'</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">each</span><span class="signs">(</span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">field</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">i</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">fields</span><span class="signs">.</span><span class="identifier">length</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">while</span><span> </span><span class="signs">(</span><span> </span><span class="identifier">i</span><span class="signs">-</span><span class="signs">-</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="identifier">itemType</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="string">'menu-item'</span><span> </span><span class="signs">)</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">field</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">fields</span><span class="signs">[</span><span class="identifier">i</span><span class="signs">]</span><span> </span><span class="signs">+</span><span> </span><span class="string">'['</span><span> </span><span class="signs">+</span><span> </span><span class="identifier">id</span><span> </span><span class="signs">+</span><span> </span><span class="string">']'</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">else</span><span> </span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="identifier">itemType</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="string">'add-menu-item'</span><span> </span><span class="signs">)</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">field</span><span> </span><span class="signs">=</span><span> </span><span class="string">'menu-item['</span><span> </span><span class="signs">+</span><span> </span><span class="identifier">id</span><span> </span><span class="signs">+</span><span> </span><span class="string">']['</span><span> </span><span class="signs">+</span><span> </span><span class="identifier">fields</span><span class="signs">[</span><span class="identifier">i</span><span class="signs">]</span><span> </span><span class="signs">+</span><span> </span><span class="string">']'</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span> </span><span class="signs">(</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">name</span><span> </span><span class="signs">&</span><span class="signs">&</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">field</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">name</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">itemData</span><span class="signs">[</span><span class="identifier">fields</span><span class="signs">[</span><span class="identifier">i</span><span class="signs">]</span><span class="signs">]</span><span> </span><span class="signs">=</span><span> </span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">value</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">return</span><span> </span><span class="identifier">itemData</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">,</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">setItemData</span><span> </span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span> </span><span class="identifier">itemData</span><span class="signs">,</span><span> </span><span class="identifier">itemType</span><span class="signs">,</span><span> </span><span class="identifier">id</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><span> </span><span class="comment">// Can take a type, such as 'menu-item', or an id.
</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">itemType</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">itemType</span><span> </span><span class="signs">|</span><span class="signs">|</span><span> </span><span class="string">'menu-item'</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="signs">!</span><span class="identifier">id</span><span> </span><span class="signs">&</span><span class="signs">&</span><span> </span><span class="identifier">itemType</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="string">'menu-item'</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">id</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="string">'.menu-item-data-db-id'</span><span class="signs">,</span><span> </span><span class="reserved">this</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">val</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="signs">!</span><span class="identifier">id</span><span> </span><span class="signs">)</span><span> </span><span class="reserved">return</span><span> </span><span class="reserved">this</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">this</span><span class="signs">.</span><span class="identifier">find</span><span class="signs">(</span><span class="string">'input'</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">each</span><span class="signs">(</span><span class="reserved">function</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">var</span><span> </span><span class="identifier">t</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">,</span><span> </span><span class="identifier">field</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">$</span><span class="signs">.</span><span class="identifier">each</span><span class="signs">(</span><span> </span><span class="identifier">itemData</span><span class="signs">,</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span> </span><span class="identifier">attr</span><span class="signs">,</span><span> </span><span class="identifier">val</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="identifier">itemType</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="string">'menu-item'</span><span> </span><span class="signs">)</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">field</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">attr</span><span> </span><span class="signs">+</span><span> </span><span class="string">'['</span><span> </span><span class="signs">+</span><span> </span><span class="identifier">id</span><span> </span><span class="signs">+</span><span> </span><span class="string">']'</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">else</span><span> </span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="identifier">itemType</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="string">'add-menu-item'</span><span> </span><span class="signs">)</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">field</span><span> </span><span class="signs">=</span><span> </span><span class="string">'menu-item['</span><span> </span><span class="signs">+</span><span> </span><span class="identifier">id</span><span> </span><span class="signs">+</span><span> </span><span class="string">']['</span><span> </span><span class="signs">+</span><span> </span><span class="identifier">attr</span><span> </span><span class="signs">+</span><span> </span><span class="string">']'</span><span class="signs">;</span><br><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">if</span><span> </span><span class="signs">(</span><span> </span><span class="identifier">field</span><span> </span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="identifier">t</span><span class="signs">.</span><span class="identifier">attr</span><span class="signs">(</span><span class="string">'name'</span><span class="signs">)</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="identifier">t</span><span class="signs">.</span><span class="identifier">val</span><span class="signs">(</span><span> </span><span class="identifier">val</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span>	</span><span class="reserved">return</span><span> </span><span class="reserved">this</span><span class="signs">;</span><br><span>	</span><span>	</span><span>	</span><span>	</span><span class="signs">}</span><br><span>	</span><span>	</span><span>	</span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span>	</span><span>	</span><span class="signs">}</span><span class="signs">,</span></code></pre>
    </body>
    </html>