<!DOCTYPE html>
    <html>
    <head>
      <title> Javascript Script Highlighter</title>
      <link rel='stylesheet' href='../css/styles.css'>
    </head>
    <body>
    <h1>Javascript script highlighter</h1>
    <h3> By: David Zarate Lopez A01329795</h3>
    <br>
    <pre><code><span class="reserved">const</span><span> </span><span class="identifier">balance</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">document</span><span class="signs">.</span><span class="identifier">getElementById</span><span class="signs">(</span><span class="string">'balance'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">money</span><span class="identifier">_plus</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">document</span><span class="signs">.</span><span class="identifier">getElementById</span><span class="signs">(</span><span class="string">'money-plus'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">money</span><span class="identifier">_minus</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">document</span><span class="signs">.</span><span class="identifier">getElementById</span><span class="signs">(</span><span class="string">'money-minus'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">list</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">document</span><span class="signs">.</span><span class="identifier">getElementById</span><span class="signs">(</span><span class="string">'list'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">form</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">document</span><span class="signs">.</span><span class="identifier">getElementById</span><span class="signs">(</span><span class="string">'form'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">text</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">document</span><span class="signs">.</span><span class="identifier">getElementById</span><span class="signs">(</span><span class="string">'text'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">amount</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">document</span><span class="signs">.</span><span class="identifier">getElementById</span><span class="signs">(</span><span class="string">'amount'</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span class="comment">// const dummyTransactions = [
</span><span> </span><span class="comment">//  { id: 1, text: 'Flower', amount: -20 },
</span><span> </span><span class="comment">//  { id: 2, text: 'Salary', amount: 300 },
</span><span> </span><span class="comment">//  { id: 3, text: 'Book', amount: -10 },
</span><span> </span><span class="comment">//  { id: 4, text: 'Camera', amount: 150 }
</span><span> </span><span class="comment">//];
</span><br><span class="reserved">const</span><span> </span><span class="identifier">localStorageTransactions</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">JSON</span><span class="signs">.</span><span class="identifier">parse</span><span class="signs">(</span><br><span> </span><span> </span><span class="identifier">localStorage</span><span class="signs">.</span><span class="identifier">getItem</span><span class="signs">(</span><span class="string">'transactions'</span><span class="signs">)</span><br><span class="signs">)</span><span class="signs">;</span><br><br><span class="reserved">let</span><span> </span><span class="identifier">transactions</span><span> </span><span class="signs">=</span><br><span> </span><span> </span><span class="identifier">localStorage</span><span class="signs">.</span><span class="identifier">getItem</span><span class="signs">(</span><span class="string">'transactions'</span><span class="signs">)</span><span> </span><span class="signs">!</span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="bool">null</span><span> </span><span class="signs">?</span><span> </span><span class="identifier">localStorageTransactions</span><span> </span><span class="signs">:</span><span> </span><span class="signs">[</span><span class="signs">]</span><span class="signs">;</span><br><br><span class="comment">// Add transaction
</span><span class="reserved">function</span><span> </span><span class="identifier">addTransaction</span><span class="signs">(</span><span class="identifier">e</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span class="identifier">e</span><span class="signs">.</span><span class="identifier">preventDefault</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="reserved">if</span><span> </span><span class="signs">(</span><span class="identifier">text</span><span class="signs">.</span><span class="identifier">value</span><span class="signs">.</span><span class="identifier">trim</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="string">''</span><span> </span><span class="signs">|</span><span class="signs">|</span><span> </span><span class="identifier">amount</span><span class="signs">.</span><span class="identifier">value</span><span class="signs">.</span><span class="identifier">trim</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="string">''</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">alert</span><span class="signs">(</span><span class="string">'Please add a text and amount'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span> </span><span class="reserved">else</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">transaction</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">id</span><span class="signs">:</span><span> </span><span class="identifier">generateID</span><span class="signs">(</span><span class="signs">)</span><span class="signs">,</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">text</span><span class="signs">:</span><span> </span><span class="identifier">text</span><span class="signs">.</span><span class="identifier">value</span><span class="signs">,</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">amount</span><span class="signs">:</span><span> </span><span class="signs">+</span><span class="identifier">amount</span><span class="signs">.</span><span class="identifier">value</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">transactions</span><span class="signs">.</span><span class="identifier">push</span><span class="signs">(</span><span class="identifier">transaction</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">addTransactionDOM</span><span class="signs">(</span><span class="identifier">transaction</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">updateValues</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">updateLocalStorage</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">text</span><span class="signs">.</span><span class="identifier">value</span><span> </span><span class="signs">=</span><span> </span><span class="string">''</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">amount</span><span class="signs">.</span><span class="identifier">value</span><span> </span><span class="signs">=</span><span> </span><span class="string">''</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><br><span class="signs">}</span><br><br><span class="comment">// Generate random ID
</span><span class="reserved">function</span><span> </span><span class="identifier">generateID</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span class="reserved">return</span><span> </span><span class="identifier">Math</span><span class="signs">.</span><span class="identifier">floor</span><span class="signs">(</span><span class="identifier">Math</span><span class="signs">.</span><span class="identifier">random</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">*</span><span> </span><span class="num">100000000</span><span class="signs">)</span><span class="signs">;</span><br><span class="signs">}</span><br><br><span class="comment">// Add transactions to DOM list
</span><span class="reserved">function</span><span> </span><span class="identifier">addTransactionDOM</span><span class="signs">(</span><span class="identifier">transaction</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span class="comment">// Get sign
</span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">sign</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">transaction</span><span class="signs">.</span><span class="identifier">amount</span><span> </span><span class="signs"><</span><span> </span><span class="num">0</span><span> </span><span class="signs">?</span><span> </span><span class="string">'-'</span><span> </span><span class="signs">:</span><span> </span><span class="string">'+'</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">item</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">document</span><span class="signs">.</span><span class="identifier">createElement</span><span class="signs">(</span><span class="string">'li'</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="comment">// Add class based on value
</span><span> </span><span> </span><span class="identifier">item</span><span class="signs">.</span><span class="identifier">classList</span><span class="signs">.</span><span class="identifier">add</span><span class="signs">(</span><span class="identifier">transaction</span><span class="signs">.</span><span class="identifier">amount</span><span> </span><span class="signs"><</span><span> </span><span class="num">0</span><span> </span><span class="signs">?</span><span> </span><span class="string">'minus'</span><span> </span><span class="signs">:</span><span> </span><span class="string">'plus'</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">item</span><span class="signs">.</span><span class="identifier">innerHTML</span><span> </span><span class="signs">=</span><span> </span><span class="string">`
    ${transaction.text} <span>${sign}${Math.abs(
    transaction.amount
  )}</span> <button class="delete-btn" onclick="removeTransaction(${
    transaction.id
  })">x</button>
  `</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">list</span><span class="signs">.</span><span class="identifier">appendChild</span><span class="signs">(</span><span class="identifier">item</span><span class="signs">)</span><span class="signs">;</span><br><span class="signs">}</span><br><br><span class="comment">// Update the balance, income and expense
</span><span class="reserved">function</span><span> </span><span class="identifier">updateValues</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">amounts</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">transactions</span><span class="signs">.</span><span class="identifier">map</span><span class="signs">(</span><span class="identifier">transaction</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">transaction</span><span class="signs">.</span><span class="identifier">amount</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">total</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">amounts</span><span class="signs">.</span><span class="identifier">reduce</span><span class="signs">(</span><span class="signs">(</span><span class="identifier">acc</span><span class="signs">,</span><span> </span><span class="identifier">item</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">(</span><span class="identifier">acc</span><span> </span><span class="signs">+</span><span class="signs">=</span><span> </span><span class="identifier">item</span><span class="signs">)</span><span class="signs">,</span><span> </span><span class="num">0</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toFixed</span><span class="signs">(</span><span class="num">2</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">income</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">amounts</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">.</span><span class="identifier">filter</span><span class="signs">(</span><span class="identifier">item</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">item</span><span> </span><span class="signs">></span><span> </span><span class="num">0</span><span class="signs">)</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">.</span><span class="identifier">reduce</span><span class="signs">(</span><span class="signs">(</span><span class="identifier">acc</span><span class="signs">,</span><span> </span><span class="identifier">item</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">(</span><span class="identifier">acc</span><span> </span><span class="signs">+</span><span class="signs">=</span><span> </span><span class="identifier">item</span><span class="signs">)</span><span class="signs">,</span><span> </span><span class="num">0</span><span class="signs">)</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">.</span><span class="identifier">toFixed</span><span class="signs">(</span><span class="num">2</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">expense</span><span> </span><span class="signs">=</span><span> </span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">amounts</span><span class="signs">.</span><span class="identifier">filter</span><span class="signs">(</span><span class="identifier">item</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">item</span><span> </span><span class="signs"><</span><span> </span><span class="num">0</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">reduce</span><span class="signs">(</span><span class="signs">(</span><span class="identifier">acc</span><span class="signs">,</span><span> </span><span class="identifier">item</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">(</span><span class="identifier">acc</span><span> </span><span class="signs">+</span><span class="signs">=</span><span> </span><span class="identifier">item</span><span class="signs">)</span><span class="signs">,</span><span> </span><span class="num">0</span><span class="signs">)</span><span> </span><span class="signs">*</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">-</span><span class="num">1</span><br><span> </span><span> </span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toFixed</span><span class="signs">(</span><span class="num">2</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">balance</span><span class="signs">.</span><span class="identifier">innerText</span><span> </span><span class="signs">=</span><span> </span><span class="string">`$${total}`</span><span class="signs">;</span><br><span> </span><span> </span><span class="identifier">money</span><span class="identifier">_plus</span><span class="signs">.</span><span class="identifier">innerText</span><span> </span><span class="signs">=</span><span> </span><span class="string">`$${income}`</span><span class="signs">;</span><br><span> </span><span> </span><span class="identifier">money</span><span class="identifier">_minus</span><span class="signs">.</span><span class="identifier">innerText</span><span> </span><span class="signs">=</span><span> </span><span class="string">`$${expense}`</span><span class="signs">;</span><br><span class="signs">}</span><br><br><span class="comment">// Remove transaction by ID
</span><span class="reserved">function</span><span> </span><span class="identifier">removeTransaction</span><span class="signs">(</span><span class="identifier">id</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span class="identifier">transactions</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">transactions</span><span class="signs">.</span><span class="identifier">filter</span><span class="signs">(</span><span class="identifier">transaction</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">transaction</span><span class="signs">.</span><span class="identifier">id</span><span> </span><span class="signs">!</span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="identifier">id</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">updateLocalStorage</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">init</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span class="signs">}</span><br><br><span class="comment">// Update local storage transactions
</span><span class="reserved">function</span><span> </span><span class="identifier">updateLocalStorage</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span class="identifier">localStorage</span><span class="signs">.</span><span class="identifier">setItem</span><span class="signs">(</span><span class="string">'transactions'</span><span class="signs">,</span><span> </span><span class="identifier">JSON</span><span class="signs">.</span><span class="identifier">stringify</span><span class="signs">(</span><span class="identifier">transactions</span><span class="signs">)</span><span class="signs">)</span><span class="signs">;</span><br><span class="signs">}</span><br><br><span class="comment">// Init app
</span><span class="reserved">function</span><span> </span><span class="identifier">init</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span class="identifier">list</span><span class="signs">.</span><span class="identifier">innerHTML</span><span> </span><span class="signs">=</span><span> </span><span class="string">''</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">transactions</span><span class="signs">.</span><span class="identifier">forEach</span><span class="signs">(</span><span class="identifier">addTransactionDOM</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="identifier">updateValues</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span class="signs">}</span><br><br><span class="identifier">init</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span class="identifier">form</span><span class="signs">.</span><span class="identifier">addEventListener</span><span class="signs">(</span><span class="string">'submit'</span><span class="signs">,</span><span> </span><span class="identifier">addTransaction</span><span class="signs">)</span><span class="signs">;</span></code></pre>
    </body>
    </html>