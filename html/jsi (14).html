<!DOCTYPE html>
    <html>
    <head>
      <title> Javascript Script Highlighter</title>
      <link rel='stylesheet' href='../css/styles.css'>
    </head>
    <body>
    <h1>Javascript script highlighter</h1>
    <h3> By: David Zarate Lopez A01329795</h3>
    <br>
    <pre><code><span class="comment">/* global describe it expect beforeEach */</span><br><span class="reserved">const</span><span> </span><span class="identifier">isArray</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'lodash/isArray'</span><span class="signs">)</span><span class="signs">;</span><br><br><span class="reserved">const</span><span> </span><span class="identifier">simpleAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-simple.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">withEditableAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-with-markers.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">withSeedKeysAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-seed-keys.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">withExtraLinesAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-with-extra-lines.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">orphanKeyAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-orphan-key.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">adjacentKeysAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-adjacent-keys.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">withBeforeAfterAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-before-after.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">emptyBeforeAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-empty-before.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">emptyAfterAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-empty-after.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">emptyCSSAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-empty-css.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">emptyHTMLAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-empty-html.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">doubleMarkerAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-double-marker.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">jsxSeedAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-jsx-seed.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">cCodeAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-c-code.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">explodedMarkerAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-exploded-marker.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">emptyContentAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-empty-contents.json'</span><span class="signs">)</span><span class="signs">;</span><br><br><span class="reserved">const</span><span> </span><span class="identifier">addSeed</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'./add-seed'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">isObject</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'lodash'</span><span class="signs">)</span><span class="signs">;</span><br><br><span class="identifier">describe</span><span class="signs">(</span><span class="string">'add-seed plugin'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">plugin</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">addSeed</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="reserved">let</span><span> </span><span class="identifier">file</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span class="signs">}</span><span> </span><span class="signs">}</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">beforeEach</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">file</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span class="signs">}</span><span> </span><span class="signs">}</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'returns a function'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">plugin</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="string">'function'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'adds a `files` property to `file.data`'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">simpleAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="string">'files'</span><span> </span><span class="reserved">in</span><span> </span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="bool">true</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'ensures that the `files` property is an object'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">simpleAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">isObject</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">.</span><span class="identifier">files</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="bool">true</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'adds test objects to the files array following a schema'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">17</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">simpleAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">files</span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">testObject</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">files</span><span class="signs">.</span><span class="identifier">indexjs</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">Object</span><span class="signs">.</span><span class="identifier">keys</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">length</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="num">8</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'key'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'key'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'ext'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'ext'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'name'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'name'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'contents'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'contents'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'head'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'head'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'tail'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'tail'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'id'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'id'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'editableRegionBoundaries'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">isArray</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'editableRegionBoundaries'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="bool">true</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'parses seeds without ids'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">6</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">simpleAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">files</span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">indexjs</span><span class="signs">,</span><span> </span><span class="identifier">indexhtml</span><span class="signs">,</span><span> </span><span class="identifier">indexcss</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">files</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjs</span><span class="signs">.</span><span class="identifier">contents</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`var x = 'y';`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjs</span><span class="signs">.</span><span class="identifier">key</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`indexjs`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexhtml</span><span class="signs">.</span><span class="identifier">contents</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`<html>
  <body>
  </body>
</html>`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexhtml</span><span class="signs">.</span><span class="identifier">key</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`indexhtml`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">contents</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`body {
  background: green;
}`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">key</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`indexcss`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'removes region markers from contents'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">2</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">withEditableAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">files</span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">indexcss</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">files</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">contents</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">not</span><span class="signs">.</span><span class="identifier">toMatch</span><span class="signs">(</span><span class="string">'--fcc-editable-region--'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">editableRegionBoundaries</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="signs">[</span><span class="num">1</span><span class="signs">,</span><span> </span><span class="num">4</span><span class="signs">]</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="comment">// TODO: can we reuse 'name'? It's always 'index', I think, which suggests
</span><span> </span><span> </span><span class="comment">// it could be reused as an id. Revisit this once the parser is live.
</span><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'parses seeds with adjacent ids, adding the id to data'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">3</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">withSeedKeysAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">files</span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">indexhtml</span><span class="signs">,</span><span> </span><span class="identifier">indexcss</span><span class="signs">,</span><span> </span><span class="identifier">indexjs</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">files</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexhtml</span><span class="signs">.</span><span class="identifier">id</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">''</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">id</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'key-for-css'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjs</span><span class="signs">.</span><span class="identifier">id</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'key-for-js'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'throws if an id is anywhere except directly before a code node'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">2</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">adjacentKeysAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toThrow</span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'::id{#id}s must come before code blocks'</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">orphanKeyAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toThrow</span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'::id{#id}s must come before code blocks'</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'ignores empty lines between ::id{#id}s and code blocks'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">1</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">withSeedKeysAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">fileTwo</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span class="signs">}</span><span> </span><span class="signs">}</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">withExtraLinesAST</span><span class="signs">,</span><span> </span><span class="identifier">fileTwo</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="identifier">fileTwo</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'gets the before-user-code for each language'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">3</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">withBeforeAfterAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">files</span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">indexjs</span><span class="signs">,</span><span> </span><span class="identifier">indexhtml</span><span class="signs">,</span><span> </span><span class="identifier">indexcss</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">files</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjs</span><span class="signs">.</span><span class="identifier">head</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">''</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexhtml</span><span class="signs">.</span><span class="identifier">head</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`<!-- comment -->`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">head</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`body {
  etc: ''
}`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'gets the after-user-code for each language'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">3</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">withBeforeAfterAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">files</span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">indexjs</span><span class="signs">,</span><span> </span><span class="identifier">indexhtml</span><span class="signs">,</span><span> </span><span class="identifier">indexcss</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">files</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjs</span><span class="signs">.</span><span class="identifier">tail</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`function teardown(params) {
  // after
}`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexhtml</span><span class="signs">.</span><span class="identifier">tail</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">''</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">tail</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`body {
  background: blue;
}`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'throws an error if there is any code of an unsupported language'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">1</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">cCodeAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toThrow</span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">"On line 30 'c' is not a supported language.\n"</span><span> </span><span class="signs">+</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">' Please use one of js, css, html, jsx or py'</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'throws if there is before/after code with empty blocks'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">2</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">emptyHTMLAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toThrow</span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'Empty code block in --before-user-code-- section'</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">emptyCSSAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toThrow</span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'Empty code block in --after-user-code-- section'</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'quietly ignores empty before sections'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">6</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">emptyBeforeAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">files</span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">indexjs</span><span class="signs">,</span><span> </span><span class="identifier">indexhtml</span><span class="signs">,</span><span> </span><span class="identifier">indexcss</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">files</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjs</span><span class="signs">.</span><span class="identifier">head</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">''</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjs</span><span class="signs">.</span><span class="identifier">tail</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'function teardown(params) {\n  // after\n}'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexhtml</span><span class="signs">.</span><span class="identifier">head</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">''</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexhtml</span><span class="signs">.</span><span class="identifier">tail</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">''</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">head</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">''</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">tail</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'body {\n  background: blue;\n}'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'quietly ignores empty after sections'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">6</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">emptyAfterAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">files</span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">indexjs</span><span class="signs">,</span><span> </span><span class="identifier">indexhtml</span><span class="signs">,</span><span> </span><span class="identifier">indexcss</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">files</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjs</span><span class="signs">.</span><span class="identifier">head</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">''</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjs</span><span class="signs">.</span><span class="identifier">tail</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">''</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexhtml</span><span class="signs">.</span><span class="identifier">head</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'<!-- comment -->'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexhtml</span><span class="signs">.</span><span class="identifier">tail</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">''</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">head</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">"body {\n  etc: ''\n}"</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">tail</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">''</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'throws an error (with line number) if 2 markers appear on 1 line'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">1</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">doubleMarkerAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toThrow</span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">`Line 8 has two markers. Each line should only have one.`</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'throws if a javascript file has formatted a marker'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">1</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">explodedMarkerAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toThrow</span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">`Line 66 has a malformed marker. It should be --fcc-editable-region--`</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'handles jsx'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">4</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">jsxSeedAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">files</span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">indexjsx</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">files</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjsx</span><span class="signs">.</span><span class="identifier">head</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`function setup() {}`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjsx</span><span class="signs">.</span><span class="identifier">tail</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`function teardown(params) {
  // after
}`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjsx</span><span class="signs">.</span><span class="identifier">contents</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`var x = 'y';

/* comment */
const Button = () => {
  return <button> {/* another comment! */} text </button>;
};`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">indexjsx</span><span class="signs">.</span><span class="identifier">key</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`indexjsx`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'combines all the code of a specific language into a single file'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">/</span><span class="signs">*</span><span> </span><span class="identifier">Revisit</span><span> </span><span class="reserved">this</span><span> </span><span class="identifier">once</span><span> </span><span class="identifier">we</span><span class="string">'ve decided what to do about multifile imports. I
    think the best approach is likely to be use the following format for .files

    { css: [css files],
      html: [html files],
      ...
    }

    or

     { css: {css files},
      html: {html files},
      ...
    }

    depending on what'</span><span class="identifier">s</span><span> </span><span class="identifier">easier</span><span> </span><span class="identifier">to</span><span> </span><span class="identifier">work</span><span> </span><span class="reserved">with</span><span> </span><span class="reserved">in</span><span> </span><span class="identifier">graphQL</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="signs">*</span><span class="signs">/</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should throw an error if a seed has no contents'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">1</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">emptyContentAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toThrow</span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">`## --seed-contents-- must appear in # --seed-- sections`</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should have an output to match the snapshot'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">simpleAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toMatchSnapshot</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br></code></pre>
    </body>
    </html>