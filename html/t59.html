<!DOCTYPE html>
    <html>
    <head>
      <title> Javascript Script Highlighter</title>
      <link rel='stylesheet' href='styles.css'>
    </head>
    <body>
    <h1>Javascript script highlighter</h1>
    <h3> By: David Zarate Lopez A01329795</h3>
    <br>
    <pre><code><span class="identifier">stop</span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="identifier">e</span><span class="signs">,</span><span> </span><span class="identifier">ui</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">var</span><span> </span><span class="identifier">children</span><span class="signs">,</span><span> </span><span class="identifier">depthChange</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">currentDepth</span><span> </span><span class="signs">-</span><span> </span><span class="identifier">originalDepth</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="comment">// Return child elements to the list
</span><span> </span><span> </span><span> </span><span> </span><span class="identifier">children</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">transport</span><span class="signs">.</span><span class="identifier">children</span><span class="signs">(</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">insertAfter</span><span class="signs">(</span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">item</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="comment">// Update depth classes
</span><span> </span><span> </span><span> </span><span> </span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="identifier">depthChange</span><span> </span><span class="signs">!</span><span class="signs">=</span><span> </span><span class="num">0</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">item</span><span class="signs">.</span><span class="identifier">updateDepthClass</span><span class="signs">(</span><span> </span><span class="identifier">currentDepth</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">children</span><span class="signs">.</span><span class="identifier">shiftDepthClass</span><span class="signs">(</span><span> </span><span class="identifier">depthChange</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">updateMenuMaxDepth</span><span class="signs">(</span><span> </span><span class="identifier">depthChange</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="comment">// Register a change
</span><span> </span><span> </span><span> </span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">registerChange</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="comment">// Update the item data.
</span><span> </span><span> </span><span> </span><span> </span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">item</span><span class="signs">.</span><span class="identifier">updateParentMenuItemDBId</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="comment">// address sortable's incorrectly-calculated top in opera
</span><span> </span><span> </span><span> </span><span> </span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">item</span><span class="signs">[</span><span class="num">0</span><span class="signs">]</span><span class="signs">.</span><span class="identifier">style</span><span class="signs">.</span><span class="identifier">top</span><span> </span><span class="signs">=</span><span> </span><span class="num">0</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="comment">// handle drop placement for rtl orientation
</span><span> </span><span> </span><span> </span><span> </span><span class="reserved">if</span><span> </span><span class="signs">(</span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">isRTL</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">item</span><span class="signs">[</span><span class="num">0</span><span class="signs">]</span><span class="signs">.</span><span class="identifier">style</span><span class="signs">.</span><span class="identifier">left</span><span> </span><span class="signs">=</span><span> </span><span class="string">'auto'</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">item</span><span class="signs">[</span><span class="num">0</span><span class="signs">]</span><span class="signs">.</span><span class="identifier">style</span><span class="signs">.</span><span class="identifier">right</span><span> </span><span class="signs">=</span><span> </span><span class="num">0</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="comment">// The width of the tab bar might have changed. Just in case.
</span><span> </span><span> </span><span> </span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">refreshMenuTabs</span><span class="signs">(</span><span> </span><span class="bool">true</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span class="signs">}</span><span class="signs">,</span><br><span class="identifier">change</span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="identifier">e</span><span class="signs">,</span><span> </span><span class="identifier">ui</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="comment">// Make sure the placeholder is inside the menu.
</span><span> </span><span> </span><span> </span><span> </span><span class="comment">// Otherwise fix it, or we're in trouble.
</span><span> </span><span> </span><span> </span><span> </span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="signs">!</span><span> </span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">placeholder</span><span class="signs">.</span><span class="identifier">parent</span><span class="signs">(</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">hasClass</span><span class="signs">(</span><span class="string">'menu'</span><span class="signs">)</span><span> </span><span class="signs">)</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="signs">(</span><span class="identifier">prev</span><span class="signs">.</span><span class="identifier">length</span><span class="signs">)</span><span> </span><span class="signs">?</span><span> </span><span class="identifier">prev</span><span class="signs">.</span><span class="identifier">after</span><span class="signs">(</span><span> </span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">placeholder</span><span> </span><span class="signs">)</span><span> </span><span class="signs">:</span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">menuList</span><span class="signs">.</span><span class="identifier">prepend</span><span class="signs">(</span><span> </span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">placeholder</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">updateSharedVars</span><span class="signs">(</span><span class="identifier">ui</span><span class="signs">)</span><span class="signs">;</span><br><span class="signs">}</span><span class="signs">,</span><br><span class="identifier">sort</span><span class="signs">:</span><span> </span><span class="reserved">function</span><span class="signs">(</span><span class="identifier">e</span><span class="signs">,</span><span> </span><span class="identifier">ui</span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">var</span><span> </span><span class="identifier">offset</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">helper</span><span class="signs">.</span><span class="identifier">offset</span><span class="signs">(</span><span class="signs">)</span><span class="signs">,</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">edge</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">isRTL</span><span> </span><span class="signs">?</span><span> </span><span class="identifier">offset</span><span class="signs">.</span><span class="identifier">left</span><span> </span><span class="signs">+</span><span> </span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">helper</span><span class="signs">.</span><span class="identifier">width</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">:</span><span> </span><span class="identifier">offset</span><span class="signs">.</span><span class="identifier">left</span><span class="signs">,</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">depth</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">negateIfRTL</span><span> </span><span class="signs">*</span><span> </span><span class="identifier">api</span><span class="signs">.</span><span class="identifier">pxToDepth</span><span class="signs">(</span><span> </span><span class="identifier">edge</span><span> </span><span class="signs">-</span><span> </span><span class="identifier">menuEdge</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="comment">// Check and correct if depth is not within range.
</span><span> </span><span> </span><span> </span><span> </span><span class="comment">// Also, if the dragged element is dragged upwards over
</span><span> </span><span> </span><span> </span><span> </span><span class="comment">// an item, shift the placeholder to a child position.
</span><span> </span><span> </span><span> </span><span> </span><span class="reserved">if</span><span> </span><span class="signs">(</span><span> </span><span class="identifier">depth</span><span> </span><span class="signs">></span><span> </span><span class="identifier">maxDepth</span><span> </span><span class="signs">|</span><span class="signs">|</span><span> </span><span class="identifier">offset</span><span class="signs">.</span><span class="identifier">top</span><span> </span><span class="signs"><</span><span> </span><span class="identifier">prevBottom</span><span> </span><span class="signs">)</span><span> </span><span class="identifier">depth</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">maxDepth</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">else</span><span> </span><span class="reserved">if</span><span> </span><span class="signs">(</span><span> </span><span class="identifier">depth</span><span> </span><span class="signs"><</span><span> </span><span class="identifier">minDepth</span><span> </span><span class="signs">)</span><span> </span><span class="identifier">depth</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">minDepth</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="identifier">depth</span><span> </span><span class="signs">!</span><span class="signs">=</span><span> </span><span class="identifier">currentDepth</span><span> </span><span class="signs">)</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">updateCurrentDepth</span><span class="signs">(</span><span class="identifier">ui</span><span class="signs">,</span><span> </span><span class="identifier">depth</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="comment">// If we overlap the next element, manually shift downwards
</span><span> </span><span> </span><span> </span><span> </span><span class="reserved">if</span><span class="signs">(</span><span> </span><span class="identifier">nextThreshold</span><span> </span><span class="signs">&</span><span class="signs">&</span><span> </span><span class="identifier">offset</span><span class="signs">.</span><span class="identifier">top</span><span> </span><span class="signs">+</span><span> </span><span class="identifier">helperHeight</span><span> </span><span class="signs">></span><span> </span><span class="identifier">nextThreshold</span><span> </span><span class="signs">)</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">next</span><span class="signs">.</span><span class="identifier">after</span><span class="signs">(</span><span> </span><span class="identifier">ui</span><span class="signs">.</span><span class="identifier">placeholder</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">updateSharedVars</span><span class="signs">(</span><span> </span><span class="identifier">ui</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">$</span><span class="signs">(</span><span class="reserved">this</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">sortable</span><span class="signs">(</span><span> </span><span class="string">"refreshPositions"</span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><br><span class="signs">}</span><br><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span></code></pre>
    </body>
    </html>