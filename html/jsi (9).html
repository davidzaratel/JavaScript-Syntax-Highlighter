<!DOCTYPE html>
    <html>
    <head>
      <title> Javascript Script Highlighter</title>
      <link rel='stylesheet' href='../css/styles.css'>
    </head>
    <body>
    <h1>Javascript script highlighter</h1>
    <h3> By: David Zarate Lopez A01329795</h3>
    <br>
    <pre><code><span class="comment">/* global describe it expect beforeEach */</span><br><br><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">isObject</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'lodash'</span><span class="signs">)</span><span class="signs">;</span><br><br><span class="reserved">const</span><span> </span><span class="identifier">mockAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-yaml-challenge.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">processFrontmatter</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'./add-frontmatter'</span><span class="signs">)</span><span class="signs">;</span><br><br><span class="identifier">describe</span><span class="signs">(</span><span class="string">'process-frontmatter plugin'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">plugin</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">processFrontmatter</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="reserved">let</span><span> </span><span class="identifier">file</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span class="signs">}</span><span> </span><span class="signs">}</span><span class="signs">;</span><br><span> </span><span> </span><span class="identifier">beforeEach</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">file</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span class="signs">}</span><span> </span><span class="signs">}</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should return a plugin which is a function'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">plugin</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="string">'function'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should maintain an object for the `file.data` property'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">isObject</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="bool">true</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="comment">// And no others. The AST includes some yaml code, and this also
</span><span> </span><span> </span><span class="comment">// checks that none of those keys get parsed
</span><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should add all keys from frontmatter to the `file.data` property'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">expectedKeys</span><span> </span><span class="signs">=</span><span> </span><span class="signs">[</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'id'</span><span class="signs">,</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'title'</span><span class="signs">,</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'challengeType'</span><span class="signs">,</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'videoUrl'</span><span class="signs">,</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'forumTopicId'</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">]</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">actualKeys</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">Object</span><span class="signs">.</span><span class="identifier">keys</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">actualKeys</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="identifier">expectedKeys</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should not mutate any type held in the frontmatter'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">5</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">id</span><span class="signs">,</span><span> </span><span class="identifier">title</span><span class="signs">,</span><span> </span><span class="identifier">challengeType</span><span class="signs">,</span><span> </span><span class="identifier">videoUrl</span><span class="signs">,</span><span> </span><span class="identifier">forumTopicId</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">id</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">title</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">challengeType</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="string">'number'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">videoUrl</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">forumTopicId</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="string">'number'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should trim extra whitespace from keys and values'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">8</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">whitespaceRE</span><span> </span><span class="signs">=</span><span> </span><span class="signs">/</span><span class="signs">(</span><span class="signs">^</span><span class="signs">\</span><span class="identifier">s</span><span class="signs">\</span><span class="identifier">S</span><span class="signs">+</span><span class="signs">|</span><span class="signs">\</span><span class="identifier">S</span><span class="signs">\</span><span class="identifier">s</span><span class="identifier">$</span><span class="signs">)</span><span class="signs">/</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">keys</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">Object</span><span class="signs">.</span><span class="identifier">keys</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">keys</span><span class="signs">.</span><span class="identifier">forEach</span><span class="signs">(</span><span class="identifier">key</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">whitespaceRE</span><span class="signs">.</span><span class="identifier">test</span><span class="signs">(</span><span class="identifier">key</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="bool">false</span><span class="signs">)</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">values</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">keys</span><span class="signs">.</span><span class="identifier">map</span><span class="signs">(</span><span class="identifier">key</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">[</span><span class="identifier">key</span><span class="signs">]</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">values</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="signs">.</span><span class="identifier">filter</span><span class="signs">(</span><span class="identifier">value</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="reserved">typeof</span><span> </span><span class="identifier">value</span><span> </span><span class="signs">=</span><span class="signs">=</span><span class="signs">=</span><span> </span><span class="string">'string'</span><span class="signs">)</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="signs">.</span><span class="identifier">forEach</span><span class="signs">(</span><span class="identifier">value</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">whitespaceRE</span><span class="signs">.</span><span class="identifier">test</span><span class="signs">(</span><span class="identifier">value</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="bool">false</span><span class="signs">)</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should not mutate url strings'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">expectedUrl</span><span> </span><span class="signs">=</span><span> </span><span class="string">'https://scrimba.com/p/pVMPUv/cE8Gpt2'</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">.</span><span class="identifier">videoUrl</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="identifier">expectedUrl</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should have an output to match the snapshot'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toMatchSnapshot</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br></code></pre>
    </body>
    </html>