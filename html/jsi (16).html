<!DOCTYPE html>
    <html>
    <head>
      <title> Javascript Script Highlighter</title>
      <link rel='stylesheet' href='../css/styles.css'>
    </head>
    <body>
    <h1>Javascript script highlighter</h1>
    <h3> By: David Zarate Lopez A01329795</h3>
    <br>
    <pre><code><span class="comment">/* global describe it expect beforeEach */</span><br><span class="reserved">const</span><span> </span><span class="identifier">mockAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-simple.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">editableSolutionAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-erm-in-solution.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">multiSolnsAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-multiple-solutions.json'</span><span class="signs">)</span><span class="signs">;</span><br><br><span class="reserved">const</span><span> </span><span class="identifier">addSolution</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'./add-solution'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">isObject</span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'lodash'</span><span class="signs">)</span><span class="signs">;</span><br><br><span class="identifier">describe</span><span class="signs">(</span><span class="string">'add solution plugin'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">plugin</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">addSolution</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="reserved">let</span><span> </span><span class="identifier">file</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span class="signs">}</span><span> </span><span class="signs">}</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">beforeEach</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">file</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span class="signs">}</span><span> </span><span class="signs">}</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'returns a function'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">plugin</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="string">'function'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'adds a `solutions` property to `file.data`'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="string">'solutions'</span><span> </span><span class="reserved">in</span><span> </span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="bool">true</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'ensures that the `solutions` property is an array'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">Array</span><span class="signs">.</span><span class="identifier">isArray</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">.</span><span class="identifier">solutions</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="bool">true</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'each entry in the `solutions` array is an object'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">.</span><span class="identifier">solutions</span><span class="signs">.</span><span class="identifier">every</span><span class="signs">(</span><span class="identifier">el</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">isObject</span><span class="signs">(</span><span class="identifier">el</span><span class="signs">)</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="bool">true</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'adds solution objects to the files array following a schema'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">15</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">solutions</span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">testObject</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">solutions</span><span class="signs">[</span><span class="num">0</span><span class="signs">]</span><span class="signs">.</span><span class="identifier">indexjs</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">Object</span><span class="signs">.</span><span class="identifier">keys</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">length</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="num">7</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'key'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'key'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'ext'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'ext'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'name'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'name'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'contents'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'contents'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'head'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'head'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'tail'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'tail'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'id'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">[</span><span class="string">'id'</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'adds multiple solutions if they exist'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">5</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">multiSolnsAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">solutions</span><span> </span><span class="signs">}</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">}</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">solutions</span><span class="signs">.</span><span class="identifier">length</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="num">3</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">solutions</span><span class="signs">[</span><span class="num">0</span><span class="signs">]</span><span class="signs">.</span><span class="identifier">indexjs</span><span class="signs">.</span><span class="identifier">contents</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">"var x = 'y';"</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">solutions</span><span class="signs">[</span><span class="num">1</span><span class="signs">]</span><span class="signs">.</span><span class="identifier">indexhtml</span><span class="signs">.</span><span class="identifier">contents</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`<html>
  <body>
  solution number two
  </body>
</html>`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">solutions</span><span class="signs">[</span><span class="num">1</span><span class="signs">]</span><span class="signs">.</span><span class="identifier">indexcss</span><span class="signs">.</span><span class="identifier">contents</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`body {
  background: white;
}`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">solutions</span><span class="signs">[</span><span class="num">2</span><span class="signs">]</span><span class="signs">.</span><span class="identifier">indexjs</span><span class="signs">.</span><span class="identifier">contents</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">"var x = 'y3';"</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should reject solutions with editable region markers'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">1</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">editableSolutionAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toThrow</span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'--fcc-editable-region-- should only appear in the --seed-contents--\n'</span><span> </span><span class="signs">+</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'section, not in --solutions--'</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should have an output to match the snapshot'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toMatchSnapshot</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br></code></pre>
    </body>
    </html>