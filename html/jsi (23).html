<!DOCTYPE html>
    <html>
    <head>
      <title> Javascript Script Highlighter</title>
      <link rel='stylesheet' href='../css/styles.css'>
    </head>
    <body>
    <h1>Javascript script highlighter</h1>
    <h3> By: David Zarate Lopez A01329795</h3>
    <br>
    <pre><code><span class="comment">/* global describe it expect beforeEach */</span><br><span class="reserved">const</span><span> </span><span class="identifier">simpleAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-simple.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">mockVideoAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-video-challenge.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="comment">// eslint-disable-next-line max-len
</span><span class="reserved">const</span><span> </span><span class="identifier">videoOutOfOrderAST</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'../__fixtures__/ast-video-out-of-order.json'</span><span class="signs">)</span><span class="signs">;</span><br><span class="reserved">const</span><span> </span><span class="identifier">addVideoQuestion</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">require</span><span class="signs">(</span><span class="string">'./add-video-question'</span><span class="signs">)</span><span class="signs">;</span><br><br><span class="identifier">describe</span><span class="signs">(</span><span class="string">'add-video-question plugin'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">plugin</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">addVideoQuestion</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="reserved">let</span><span> </span><span class="identifier">file</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span class="signs">}</span><span> </span><span class="signs">}</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">beforeEach</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">file</span><span> </span><span class="signs">=</span><span> </span><span class="signs">{</span><span> </span><span class="identifier">data</span><span class="signs">:</span><span> </span><span class="signs">{</span><span class="signs">}</span><span> </span><span class="signs">}</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'returns a function'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">plugin</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toEqual</span><span class="signs">(</span><span class="string">'function'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'adds a `question` property to `file.data`'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockVideoAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="string">'question'</span><span> </span><span class="reserved">in</span><span> </span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="bool">true</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should generate a question object from a video challenge AST'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">8</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockVideoAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">testObject</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">.</span><span class="identifier">question</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">Object</span><span class="signs">.</span><span class="identifier">keys</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">length</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="num">3</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'text'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">.</span><span class="identifier">text</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'solution'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">.</span><span class="identifier">solution</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'number'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toHaveProperty</span><span class="signs">(</span><span class="string">'answers'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">Array</span><span class="signs">.</span><span class="identifier">isArray</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">.</span><span class="identifier">answers</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="bool">true</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="reserved">typeof</span><span> </span><span class="identifier">testObject</span><span class="signs">.</span><span class="identifier">answers</span><span class="signs">[</span><span class="num">0</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'string'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should convert question and answer markdown into html'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockVideoAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="reserved">const</span><span> </span><span class="identifier">testObject</span><span> </span><span class="signs">=</span><span> </span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">.</span><span class="identifier">question</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">Object</span><span class="signs">.</span><span class="identifier">keys</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">length</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="num">3</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">.</span><span class="identifier">text</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'<p>Question line 1</p>\n'</span><span> </span><span class="signs">+</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">`<pre><code class="language-js">  var x = 'y';\n`</span><span> </span><span class="signs">+</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'</code></pre>'</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">.</span><span class="identifier">solution</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="num">3</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">.</span><span class="identifier">answers</span><span class="signs">[</span><span class="num">0</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">'<p>Some inline <code>code</code></p>'</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">.</span><span class="identifier">answers</span><span class="signs">[</span><span class="num">1</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><span class="string">`<p>Some <em>italics</em></p>
<p>A second answer paragraph.</p>`</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">testObject</span><span class="signs">.</span><span class="identifier">answers</span><span class="signs">[</span><span class="num">2</span><span class="signs">]</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toBe</span><span class="signs">(</span><br><span> </span><span> </span><span> </span><span> </span><span> </span><span> </span><span class="string">'<p><code> code in </code> code tags</p>'</span><br><span> </span><span> </span><span> </span><span> </span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="comment">// TODO: consider testing for more specific messages.  Ideally we them to say
</span><span> </span><span> </span><span class="comment">// 'The md is missing "x"', so it's obvious how to fix things.
</span><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should throw if the subheadings are outside the question heading'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">1</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">videoOutOfOrderAST</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toThrow</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should NOT throw if there is no question'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">.</span><span class="identifier">assertions</span><span class="signs">(</span><span class="num">1</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">simpleAST</span><span class="signs">)</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">not</span><span class="signs">.</span><span class="identifier">toThrow</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><br><span> </span><span> </span><span class="identifier">it</span><span class="signs">(</span><span class="string">'should match the video snapshot'</span><span class="signs">,</span><span> </span><span class="signs">(</span><span class="signs">)</span><span> </span><span class="signs">=</span><span class="signs">></span><span> </span><span class="signs">{</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">plugin</span><span class="signs">(</span><span class="identifier">mockVideoAST</span><span class="signs">,</span><span> </span><span class="identifier">file</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span> </span><span> </span><span class="identifier">expect</span><span class="signs">(</span><span class="identifier">file</span><span class="signs">.</span><span class="identifier">data</span><span class="signs">)</span><span class="signs">.</span><span class="identifier">toMatchSnapshot</span><span class="signs">(</span><span class="signs">)</span><span class="signs">;</span><br><span> </span><span> </span><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br><span class="signs">}</span><span class="signs">)</span><span class="signs">;</span><br></code></pre>
    </body>
    </html>